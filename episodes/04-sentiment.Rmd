---
title: "sentiment analysis"
teaching: 0
exercises: 0
---

:::::::::::::::::::::::::::::::::::::: questions 

- "More resources"

::::::::::::::::::::::::::::::::::::::::::::::::

::::::::::::::::::::::::::::::::::::: objectives

- "Learning about extra tools that can aid your text mining journey"


::::::::::::::::::::::::::::::::::::::::::::::::

```{r, include = FALSE}
library(tidyverse)
library(tidytext)
library(tm)
articles_filtered <- read_csv("data/articles_filtered.csv", na = c("NA", "NULL", ""))
```

## Sentiment analysis
Sentiment analysis is a method for measuring the sentiment of a text. When humans read a text they can easily find the sentiment of a paragraph or text based on the meaning of the combined written words.

A machine does not have the same abilities, so instead of having it read the text, we look at the combined words of the text and look at the sentiment of each word and the sentiment of the text/paragraph would be the sum of the sentiments of the words.

In the previous section we had a list of words in the text without stopwords. To do a sentiment analysis we can use a so-called lexicon and assign a sentiment to each word. In order to do this we need an list of words and their sentiment. A simple form would be wether they are positive or negative.

There are multiple sentiment lexicons. For a start we will be using the `bing` lexicon. This lexicon categorises words as either positive or negative.


```{r}
get_sentiments("bing")
```

To be able to use the `bing`-lexicon, we have to save it.

```{r}
bing <- get_sentiments("bing")
```


```{r}
articles_filtered %>% 
  inner_join(bing) 
```


```{r}
articles_filtered %>% 
  inner_join(bing) %>% 
  count(word, sentiment, president, sort = TRUE) %>% 
  ungroup() %>% 
  group_by(sentiment, president) %>% 
  slice_max(n, n = 10) %>% 
  ungroup() %>% 
  mutate(word = reorder(word, n)) %>% 
  ggplot(mapping = aes(n, word, fill = sentiment)) +
  geom_col(show.legend = FALSE) +
  facet_grid(president~sentiment, scales = "free") +
  labs(x = "Contribution to sentiment", 
       y = NULL)





# 
# articles_filtered %>% 
#   inner_join(bing) %>% 
#   group_by(president, sentiment) %>% 
#   count(word, sort = TRUE) %>% 
#   slice_max(n, n = 10) %>% 
#   ggplot(mapping = aes(x = n, y = word)) +
#   geom_col() +
#   facet_grid(sentiment~president)
  
```




```{r}
articles_filtered %>% 
  inner_join(bing) %>% 
  group_by(president) %>% 
  summarise(positive = sum(sentiment == "positive"),
            negative = sum(sentiment == "negative")) %>% 
  ggplot(mapping = aes(x = president, y = positive)) +
  geom_col()
```

::::::::::::::::::::::::::::::::::::: keypoints 

- "Stemming can be useful for Natural Language Processing; Stopword lists are available for many languages"

::::::::::::::::::::::::::::::::::::::::::::::::
